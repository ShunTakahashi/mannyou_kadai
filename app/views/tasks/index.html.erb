<h1>Tasks</h1>

<%= t('views.search') %>
<%= form_with(model: Task.new, url: tasks_path, local: true, method: :get) do |form| %>

  <%= form.label :title,t('views.title')%>
  <%= form.text_field :title %>
  <br>
  <%= form.label :content, t('views.content') %>
  <%= form.text_field :content %>
  <br>
  <%= form.label :status, t('views.status') %>
  <%= form.select :status, [
      [t("views.not_yet_arrived"), 'not_yet_arrived'],
      [t('views.underway'), 'underway'],
      [t('views.complete'), 'complete'], ]
  %>
  <br>
  <%= form.submit t('views.search'), name: :search %>
  <%= button_to '再度読み込み', tasks_path, class: 'btn btn-default' %>
<% end %>

<table>
  <thead>
  <tr>
    <th><%= t('views.title') %></th>
    <th><%= t('views.content') %></th>
    <th>
      <%= t('views.expired_at') %>
      <%= link_to t('views.expired_at_sort_asc'), tasks_path(sort_expired_asc: "true") %>
      <%= link_to t('views.expired_at_sort_desc'), tasks_path(sort_expired_desc: "true") %>
    </th>
    <th><%= t('views.status') %></th>
    <th colspan="3"></th>
  </tr>
  </thead>

  <tbody>
  <div class="task_list">
    <% @tasks.each do |task| %>
      <tr>
        <td><%= task.title %></td>
        <td><%= task.content %></td>
        <td><%= short_time(task.expired_at) %></td>
        <td><%= status_name(task.status) %></td>
        <td><%= link_to t('views.show'), task_path(task) %></td>
        <td><%= link_to t('views.edit'), edit_task_path(task) %></td>
        <td><%= link_to t('views.delete'), task_path(task), method: :delete, data: {confirm: '本当に削除してもよろしいですか?'} %></td>
      </tr>
    <% end %>
  </div>
  </tbody>
</table>

<br>

<%= link_to t('views.new_task'), new_task_path %>

